#!/bin/bash

export CAIDE="$caide"

"$caide" problem prob
cd prob
cat <<EOF >case1.in
1
2
3
EOF
cp case1.in case1.out

"$caide" lang cpp


cat <<EOF >prob.cpp
#include <istream>
#include <ostream>
using namespace std;
void solve(istream& in, ostream& out) {
    int n;
    while (in >> n)
        out << n << endl;
}
EOF

echo "    bash `pwd`/../templates/cpp-builder.sh" >>../caide.ini
"$caide" test
cd ..
compare_with after-test prob/.caideproblem/test/report.txt
cd prob

echo "[csharp_builder]" >>../caide.ini
echo "evaluates_tests: yes" >>../caide.ini
echo "build_and_run_tests: bash `pwd`/../templates/cs-builder.sh" >>../caide.ini

"$caide" lang csharp

cat <<EOF >prob.cs
using System;
using System.IO;
class Solution {
    public void solve(TextReader input, TextWriter output) {
        string line;
        while ((line = input.ReadLine()) != null) {
            output.WriteLine(line);
        }
    }
}
EOF

rm .caideproblem/test/report.txt

"$caide" test
cd ..
compare_with after-test prob/.caideproblem/test/report.txt
